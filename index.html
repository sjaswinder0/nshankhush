<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy 1st Anniversary</title>
    <!-- Elegant Google Fonts for a classic, romantic typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Lora:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    
    <style>
        /* CSS Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent; /* Removes touch highlight on iOS */
        }

        body, html {
            height: 100%;
            width: 100%;
            font-family: 'Lora', serif;
            overflow: hidden; /* Prevent scrolling, keeps it a single viewport app */
            background-color: #000; /* Pure black background to blend with image opacity */
        }

        /* 1. Background Image */
        .background-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* Uses image.jpeg from the same folder */
            background: url('image.jpeg') center center / cover no-repeat;
            opacity: 0.6; /* Sets the background image itself to 60% opacity */
            z-index: 1;
        }

        /* Heart Animation Layer (from previous enhancement) */
        .heart-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allows user to tap envelopes through the hearts */
            z-index: 3;
            overflow: hidden;
        }

        .falling-heart {
            position: absolute;
            top: -10%;
            color: #ff4d4d;
            animation: fall linear forwards;
            opacity: 0.8;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            80% { opacity: 0.8; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        /* Main UI Layer */
        .ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 4;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
        }

        /* Generic transition class for smooth state changes */
        .fade-element {
            opacity: 0;
            visibility: hidden;
            position: absolute;
            transition: opacity 0.8s ease, visibility 0.8s ease, transform 0.8s ease;
        }

        .fade-element.active {
            opacity: 1;
            visibility: visible;
        }

        /* 2. Floating Envelopes */
        .envelope-wrapper {
            cursor: pointer;
            transform: translateY(30px) scale(0.9); /* Starts slightly lower & smaller */
        }

        .envelope-wrapper.active {
            transform: translateY(0) scale(1);
        }

        .envelope {
            width: 120px;
            height: 120px;
            /* Added purple glow to stand out against background */
            filter: drop-shadow(0 0 25px rgba(123, 44, 191, 0.8)) drop-shadow(0 5px 15px rgba(0,0,0,0.9));
            /* Changed to a more active float and shake animation */
            animation: floatAndShake 2.5s ease-in-out infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
        }

        .envelope-svg {
            width: 100%;
            height: 100%;
            fill: #7b2cbf; /* Luxury purple color */
        }

        @keyframes floatAndShake {
            0% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-15px) rotate(-6deg); }
            50% { transform: translateY(-25px) rotate(6deg); }
            75% { transform: translateY(-15px) rotate(-4deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        .envelope::after {
            content: "Tap to open";
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
            font-family: 'Playfair Display', serif;
            white-space: nowrap;
            letter-spacing: 1px;
            animation: pulseText 2s infinite;
        }

        @keyframes pulseText {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* 3. Classic Letter Modal */
        .letter-modal {
            background-color: #fdfbf7; /* Off-white, paper-like color */
            width: 100%;
            max-width: 380px; /* Optimal reading width for iPhone */
            padding: 40px 30px;
            border-radius: 12px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4), inset 0 0 15px rgba(255,255,255,0.5);
            text-align: center;
            transform: translateY(30px) scale(0.95);
        }

        .letter-modal.active {
            transform: translateY(0) scale(1);
        }

        .letter-modal h2 {
            font-family: 'Playfair Display', serif;
            color: #2c2c2c;
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .letter-modal p {
            color: #4a4a4a;
            font-size: 1.15rem;
            line-height: 1.7;
            margin-bottom: 35px;
            text-align: justify;
        }

        .action-btn {
            background-color: #2c2c2c;
            color: #fff;
            border: none;
            padding: 16px 30px; /* Generous touch target for mobile */
            font-size: 1.1rem;
            font-family: 'Playfair Display', serif;
            border-radius: 30px;
            letter-spacing: 1px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s, background-color 0.2s;
            width: 100%;
        }

        .action-btn:active {
            transform: scale(0.95);
            background-color: #1a1a1a;
        }

        /* 4. Final Message */
        .final-message {
            text-align: center;
            color: #ffffff;
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            line-height: 1.5;
            padding: 0 20px;
            text-shadow: 0 4px 15px rgba(0,0,0,0.8);
            transform: scale(0.9);
        }

        .final-message.active {
            transform: scale(1);
            transition: opacity 2s ease, visibility 2s ease, transform 2s ease; 
        }

        .final-message span.sub-text {
            display: block;
            margin-top: 10px;
            font-size: 1.4rem;
            font-style: italic;
            color: #fce4e4;
        }

        .khush-msg {
            display: block;
            font-size: 1.8rem;
            margin-top: 25px;
            font-weight: 600;
            color: #ffcccc;
        }

        /* Portrait lock overlay for iPhone */
        #orientation-warning {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000;
            z-index: 9999;
            color: #fff;
            text-align: center;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        #orientation-warning p { font-size: 1.5rem; line-height: 1.5; font-family: 'Playfair Display', serif; }
        #orientation-warning svg { width: 50px; height: 50px; margin-bottom: 20px; animation: rotatePhone 2s infinite ease-in-out; }
        
        @keyframes rotatePhone {
            0% { transform: rotate(0deg); }
            50% { transform: rotate(-90deg); }
            100% { transform: rotate(-90deg); }
        }

        /* Force user to rotate if in landscape */
        @media screen and (orientation: landscape) and (max-height: 600px) {
            #orientation-warning { display: flex; }
            .ui-layer, .heart-container, .background-container { display: none; }
        }
    </style>
</head>
<body>

    <!-- Orientation Lock Screen -->
    <div id="orientation-warning">
        <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
            <line x1="12" y1="18" x2="12.01" y2="18"></line>
        </svg>
        <p>Please rotate your iPhone<br>to portrait mode.</p>
    </div>

    <!-- Background Layer -->
    <div class="background-container"></div>

    <!-- Heart Animation Layer -->
    <div id="heart-container" class="heart-container"></div>

    <!-- UI Layer -->
    <div class="ui-layer">
        
        <!-- Reusable Dynamic Envelope -->
        <div id="envelope-wrapper" class="envelope-wrapper fade-element active">
            <div class="envelope">
                <!-- Luxury Purple SVG Envelope -->
                <svg class="envelope-svg" viewBox="0 0 512 512">
                    <path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/>
                </svg>
            </div>
        </div>

        <!-- Reusable Dynamic Letter Modal -->
        <div id="letter-modal" class="letter-modal fade-element">
            <h2 id="letter-title">Title</h2>
            <p id="letter-text">Message</p>
            <button class="action-btn" id="next-btn">I have read it</button>
        </div>

        <!-- Final Message -->
        <div id="final-msg" class="final-message fade-element">
            ❤️ Still choosing you. <br>
            <span class="sub-text">Every year. Every day. ❤️</span>
            <span class="khush-msg">Love you Khush ❤️</span>
        </div>

    </div>

    <!-- Application Logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- 1. Heart Dropping Animation ---
            const heartContainer = document.getElementById('heart-container');
            
            function createHeart() {
                const heart = document.createElement('div');
                heart.classList.add('falling-heart');
                heart.innerHTML = '❤️';
                
                // Randomize horizontal position, animation duration, and size
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = Math.random() * 4 + 4 + 's'; // Between 4 and 8s
                heart.style.fontSize = Math.random() * 1.2 + 0.8 + 'rem'; // Between 0.8rem and 2.0rem
                
                heartContainer.appendChild(heart);
                
                setTimeout(() => { heart.remove(); }, 8000); // Cleanup memory
            }
            setInterval(createHeart, 400);

            // --- 2. Anniversary Letters Data ---
            const anniversaryLetters = [
                { title: "To My Darling", message: "Honey, can you believe it’s already been a year? Every day with you feels like a little adventure, and I still get butterflies thinking about that magical day we said ‘I do’. You make my heart so full, darling, and I can’t wait for all the years to come." },
                { title: "My Sweet Love", message: "Darling, our first year of marriage has been the happiest of my life. I love how we laugh, how we dream together, and how every moment with you feels like home. Honey, here’s to a lifetime of days just like this, hand in hand, heart to heart." },
                { title: "My Dearest Honey", message: "Honey, I still remember your smile on our wedding day like it happened yesterday. Every glance, every touch, every laugh — you make even ordinary moments feel extraordinary, my love." },
                { title: "Darling of My Heart", message: "Darling, being with you has shown me what true love feels like. You are my safe place, my joy, and my favorite part of every day. I love you more than words can ever say." },
                { title: "Sweetheart", message: "Sweetheart, one year down and forever to go. Every day with you is a gift, and I promise to keep cherishing every moment, honey, as we continue this amazing journey together." },
                { title: "Beloved", message: "Beloved, your laughter is my favorite melody, and your hugs are my sanctuary. Darling, thank you for filling my life with warmth, love, and happiness I never knew existed." },
                { title: "My Love", message: "My love, you are my morning sun and my evening stars. Every day I wake up grateful for you, honey, and fall asleep dreaming of our beautiful life together." },
                { title: "Honey Bun", message: "Honey bun, our first year has been magical. Your love makes me braver, happier, and more complete. Darling, I treasure every little thing about you." },
                { title: "Darling Soulmate", message: "Darling soulmate, even after a year, I still get butterflies thinking about holding your hand and looking into your eyes. Honey, you are my forever and always." },
                { title: "Sweet Love of Mine", message: "Sweet love of mine, this year with you has been the best chapter of my life. Darling, I can’t wait to write every future chapter by your side, filled with laughter, love, and joy." }
            ];

            let currentIndex = 0;

            // --- 3. DOM Elements & Logic ---
            const envelopeWrapper = document.getElementById('envelope-wrapper');
            const letterModal = document.getElementById('letter-modal');
            const letterTitle = document.getElementById('letter-title');
            const letterText = document.getElementById('letter-text');
            const nextBtn = document.getElementById('next-btn');
            const finalMsg = document.getElementById('final-msg');

            // Opens the envelope and displays the letter
            envelopeWrapper.addEventListener('click', () => {
                envelopeWrapper.classList.remove('active'); // Fade out envelope
                
                // Wait for fade out, then populate and fade in the letter
                setTimeout(() => {
                    letterTitle.textContent = anniversaryLetters[currentIndex].title;
                    letterText.textContent = anniversaryLetters[currentIndex].message;
                    letterModal.classList.add('active');
                }, 600);
            });

            // Closes the letter and triggers the next envelope (or final message)
            nextBtn.addEventListener('click', () => {
                letterModal.classList.remove('active'); // Fade out letter
                currentIndex++; // Move to next letter
                
                setTimeout(() => {
                    if (currentIndex < anniversaryLetters.length) {
                        // Show the next envelope
                        envelopeWrapper.classList.add('active');
                    } else {
                        // All letters read, show the grand finale
                        finalMsg.classList.add('active');
                    }
                }, 600);
            });
        });
    </script>
</body>
</html>